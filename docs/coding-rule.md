# Java コーディング規約（検証用・簡易版）

本規約は AI によるコードレビュー検証を目的としたものであり、  
プロダクション環境向けの完全なコーディング規約ではない。

---

## 1. 総則・適用範囲

### 1.1 目的
- 可読性の向上
- 最低限の品質基準の統一

### 1.2 適用対象
- Java の `.java` ファイルすべて
- テスト用・検証用サンプルコード

### 1.3 省略事項
- パフォーマンス規約
- セキュリティ設計
- 高度なアーキテクチャ規約
- フレームワーク特化ルール（Spring など）

### 1.4 記法
- 「〜すべき」＝必須  
- 「〜が望ましい」＝推奨

---

## 2. ファイル構成・パッケージ宣言・import の扱い

### 2.1 ファイル構成
- ファイル名はクラス名と一致させる。
- 1ファイル1クラスとする。
- ファイル内の順序：  
  1) package → 2) import → 3) Javadoc → 4) クラス本体

### 2.2 パッケージ宣言
- すべて小文字。
- 過度な深い階層は作らない。

### 2.3 import の扱い
- 未使用 import 禁止。
- ワイルドカード import 禁止（`import java.util.*;`）。
- 並び順：`java.*` → `javax.*` → 外部ライブラリ → 自作パッケージ

---

## 3. コーディングスタイル（インデント・改行・空白・括弧）

### 3.1 インデント
- スペース4つ。タブ禁止。

### 3.2 改行
- メソッド間は1行空行。
- 論理演算子は改行時に次の行の先頭へ。

### 3.3 空白
- 演算子前後にスペース必須。
- `if (x)` のようにキーワードと括弧の間はスペース。
- 二重スペース禁止。

### 3.4 括弧 `{}` の扱い
- K&R スタイル（行末に `{`）
- 制御構文は必ず `{}` を書く。

---

## 4. 命名規約（クラス・メソッド・変数・定数・boolean）

### 4.1 クラス名
- PascalCase  
  例：`OrderService`, `UserController`

### 4.2 メソッド名
- camelCase  
  例：`getUser()`, `updateStatus()`

### 4.3 変数名
- camelCase  
  例：`totalAmount`, `orderList`
- 1文字変数は禁止（例外：`i`, `j`）

### 4.4 boolean の命名
#### 4.4.1 変数
以下いずれかの形式：
- `isXxxx`
- `hasXxxx`
- `xxxxFlag`

例：`isActive`, `hasPermission`, `errorFlag`

#### 4.4.2 メソッド
- `isXxxx()`, `hasXxxx()` の形式で boolean を返す。

### 4.5 定数
- UPPER_SNAKE_CASE  
  例：`MAX_RETRY_COUNT`, `DEFAULT_TIMEOUT_MS`

### 4.6 パッケージ名
- 小文字のみ。

### 4.7 禁止事項
- 定数の camelCase 命名
- 意味のない名前（`tmp`, `data`, `a1`）
- boolean 名詞単体（`active` など）

---

## 5. クラス／インタフェース設計の基本ルール

### 5.1 単一責務
- 1クラス1責務を基本とする。

### 5.2 アクセス修飾子
- フィールドは private。
- 最小限の public。

### 5.3 クラス内の並び順
1. フィールド  
2. コンストラクタ  
3. public メソッド  
4. private メソッド  

---

## 6. メソッド設計（引数・戻り値・副作用）

### 6.1 長さ
- 1メソッド40行以下を推奨。

### 6.2 引数
- 3つ以下を推奨。

### 6.3 戻り値
- 可能な限り値を返す（副作用中心は避ける）。

### 6.4 禁止事項
- 5引数以上
- 100行を超えるメソッド

---

## 7. フィールド・ローカル変数・定数の扱い

### 7.1 フィールド
- private を基本とする。

### 7.2 ローカル変数
- 使用箇所付近で宣言。

### 7.3 定数
- 必ず static final + UPPER_SNAKE_CASE。

### 7.4 禁止事項
- マジックナンバー  
- 未使用変数

---

## 8. コレクション・ジェネリクス利用時の基本ルール

### 8.1 ジェネリクス
- raw type 使用禁止  
  （例：`List list` → NG）

### 8.2 初期化
- 右辺は型推論可（`new ArrayList<>()`）

### 8.3 null 戻り禁止
- コレクションは null を返さず空を返す。

---

## 9. 例外設計・例外処理の基本ルール

### 9.1 catch
- 例外は具体的な型でキャッチ。

### 9.2 例外メッセージ
- 原因が分かるメッセージを書く。

### 9.3 禁止事項
- 例外握りつぶし  
- `throws Exception`  
- すべて RuntimeException に包む

---

## 10. null 取り扱いと防御的コーディング

### 10.1 null チェック
- パラメータ null を想定してチェックする。

### 10.2 Optional
- 戻り値で使用可（フィールドで使用は禁止）。

---

## 11. ログ出力ルール

### 11.1 ログレベル
- info / warn / error を適切に使用。

### 11.2 禁止事項
- `System.out.println`

---

## 12. コメント・Javadoc ルール

### 12.1 コメント
- “何をしているか” は書かない。  
- “なぜそうするのか” を記述。

### 12.2 Javadoc
- public メソッドは記載推奨。

---

## 13. テストコード（単体テスト）の基本ルール

### 13.1 クラス名
- `XxxxTest`

### 13.2 メソッド名
- 期待結果の文章形式  
  例：`shouldReturnUserWhenIdIsValid()`

### 13.3 禁止事項
- テスト内で例外を黙殺  
- 1テストに過剰な assert

---

## 14. 非推奨事項・アンチパターン（検証対象）

- ワイルドカード import
- raw type
- public フィールド
- if / for のブレース省略
- 行末余分スペース
- マジックナンバー
- System.out.println
- 無意味な変数名（`tmp`, `data` など）

